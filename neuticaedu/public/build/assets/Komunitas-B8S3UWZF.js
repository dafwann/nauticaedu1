import{_ as N,c as l,a as t,h as r,t as k,F as S,f as T,w as g,n as V,i as e,k as u,y as P,p as f,q as _,s as I,o as d}from"./app-CNL93yYO.js";const x={name:"AdminKomunitas",setup(){const m="http://localhost:8000/api",n=f([]),v=f(!1),o=f(null),i=f({nama:"",link:"",foto:"",status:"aktif"}),K=_(()=>i.value.nama&&i.value.link&&i.value.foto),s=async()=>{const b=await(await fetch(`${m}/komunitas`)).json();n.value=b.data},c=async()=>{if(!(await fetch(`${m}/komunitas`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nama:i.value.nama,link:i.value.link,foto:i.value.foto})})).ok){alert("Gagal menambah komunitas");return}v.value=!1,i.value={nama:"",link:"",foto:"",status:"aktif"},s()},y=a=>{o.value={...a}},w=async()=>{await fetch(`${m}/komunitas/${o.value.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o.value)}),o.value=null,s()},p=async a=>{const b=a.status==="aktif"?"non-aktif":"aktif";await fetch(`${m}/komunitas/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({nama:a.nama,link:a.link,foto:a.foto,status:b})}),s()},h=()=>{o.value=null},C=async a=>{confirm(`Hapus komunitas "${a.nama}"?`)&&(await fetch(`${m}/komunitas/${a.id}`,{method:"DELETE"}),s())},E=a=>window.open(a,"_blank"),A=a=>a.length>40?a.slice(0,37)+"...":a,U=a=>{a.target.style.display="none"};return I(s),{komunitas:n,showAddKomunitas:v,editingKomunitas:o,newKomunitas:i,isValidNewKomunitas:K,addKomunitas:c,editKomunitas:y,saveKomunitas:w,cancelEdit:h,toggleKomunitasStatus:p,deleteKomunitas:C,truncateUrl:A,showImagePreview:E,handleImageError:U}}},B={class:"admin-komunitas"},L={class:"page-header"},M={class:"header-content"},j={class:"header-actions"},F={class:"table-section"},O={class:"table-container"},D={class:"table-header"},J={class:"table-info"},G={class:"table-wrapper"},R={class:"komunitas-table"},q=["onClick"],z=["src","alt"],H=["href"],Q={class:"link-url"},W={class:"action-buttons"},X=["onClick"],Y={key:0,class:"empty-state"},Z={class:"modal-header"},$={class:"modal-body"},tt={class:"form-group"},nt={class:"form-group"},ot={class:"form-group"},st={key:0,class:"image-preview-small"},at=["src"],it={class:"modal-footer"},lt=["disabled"],dt={class:"modal-header"},et={class:"modal-body"},mt={class:"form-group"},ut={class:"form-group"},rt={class:"form-group"},kt={key:0,class:"image-preview-small"},ft=["src"],vt={class:"form-group"},ct={class:"modal-footer"};function bt(m,n,v,o,i,K){return d(),l("div",B,[t("div",L,[t("div",M,[n[22]||(n[22]=t("div",{class:"header-text"},[t("h1",null,"ðŸ˜ï¸ Management Komunitas"),t("p",null,"Kelola komunitas yang ditampilkan di halaman community"),t("div",{class:"page-notice"},' ðŸ’¡ Komunitas yang statusnya "aktif" akan muncul di halaman community ')],-1)),t("div",j,[t("button",{onClick:n[0]||(n[0]=s=>o.showAddKomunitas=!0),class:"btn-primary"},"âž• Tambah Komunitas")])])]),t("div",F,[t("div",O,[t("div",D,[t("div",J,"Total "+k(o.komunitas.length)+" komunitas",1)]),t("div",G,[t("table",R,[n[24]||(n[24]=t("thead",null,[t("tr",null,[t("th",{class:"col-gambar"},"Gambar"),t("th",{class:"col-nama"},"Nama"),t("th",{class:"col-link"},"Link"),t("th",{class:"col-status"},"Status"),t("th",{class:"col-aksi"},"Aksi")])],-1)),t("tbody",null,[(d(!0),l(S,null,T(o.komunitas,s=>(d(),l("tr",{key:s.id},[t("td",null,[t("div",{class:"image-preview",onClick:c=>o.showImagePreview(s.foto)},[t("img",{src:s.foto,alt:s.nama,class:"thumbnail-preview"},null,8,z),n[23]||(n[23]=t("span",{class:"preview-hint"},"ðŸ‘ï¸ Preview",-1))],8,q)]),t("td",null,k(s.nama),1),t("td",null,[t("a",{href:s.link,target:"_blank",class:"external-link",onClick:n[1]||(n[1]=g(()=>{},["stop"]))}," ðŸ”— Buka Link ",8,H),t("div",Q,k(o.truncateUrl(s.link)),1)]),t("td",null,[t("span",{class:V(["status-badge",s.status])},k(s.status==="aktif"?"Aktif":"Non-Aktif"),3)]),t("td",null,[t("div",W,[t("button",{onClick:c=>o.editKomunitas(s),class:"btn-action edit"},"âœï¸",8,X)])])]))),128))])]),o.komunitas.length===0?(d(),l("div",Y,[n[25]||(n[25]=t("div",{class:"empty-icon"},"ðŸ˜ï¸",-1)),n[26]||(n[26]=t("h3",null,"Belum ada komunitas",-1)),t("button",{onClick:n[2]||(n[2]=s=>o.showAddKomunitas=!0),class:"btn-primary"},"âž• Tambah Komunitas Pertama")])):r("",!0)])])]),o.showAddKomunitas?(d(),l("div",{key:0,class:"modal-backdrop",onClick:n[11]||(n[11]=s=>o.showAddKomunitas=!1)},[t("div",{class:"modal",onClick:n[10]||(n[10]=g(()=>{},["stop"]))},[t("div",Z,[n[27]||(n[27]=t("h3",null,"âž• Tambah Komunitas",-1)),t("button",{onClick:n[3]||(n[3]=s=>o.showAddKomunitas=!1),class:"modal-close"},"Ã—")]),t("div",$,[t("div",tt,[n[28]||(n[28]=t("label",null,"Nama *",-1)),e(t("input",{"onUpdate:modelValue":n[4]||(n[4]=s=>o.newKomunitas.nama=s),class:"form-input",type:"text"},null,512),[[u,o.newKomunitas.nama]])]),t("div",nt,[n[29]||(n[29]=t("label",null,"Link *",-1)),e(t("input",{"onUpdate:modelValue":n[5]||(n[5]=s=>o.newKomunitas.link=s),class:"form-input",type:"url"},null,512),[[u,o.newKomunitas.link]])]),t("div",ot,[n[30]||(n[30]=t("label",null,"URL Foto *",-1)),e(t("input",{"onUpdate:modelValue":n[6]||(n[6]=s=>o.newKomunitas.foto=s),class:"form-input",type:"url"},null,512),[[u,o.newKomunitas.foto]]),o.newKomunitas.foto?(d(),l("div",st,[t("img",{src:o.newKomunitas.foto,alt:"Preview",onError:n[7]||(n[7]=(...s)=>o.handleImageError&&o.handleImageError(...s))},null,40,at)])):r("",!0)])]),t("div",it,[t("button",{onClick:n[8]||(n[8]=s=>o.showAddKomunitas=!1),class:"btn-secondary"},"Batal"),t("button",{onClick:n[9]||(n[9]=(...s)=>o.addKomunitas&&o.addKomunitas(...s)),class:"btn-primary",disabled:!o.isValidNewKomunitas},"ðŸ’¾ Simpan",8,lt)])])])):r("",!0),o.editingKomunitas?(d(),l("div",{key:1,class:"modal-backdrop",onClick:n[21]||(n[21]=(...s)=>o.cancelEdit&&o.cancelEdit(...s))},[t("div",{class:"modal",onClick:n[20]||(n[20]=g(()=>{},["stop"]))},[t("div",dt,[n[31]||(n[31]=t("h3",null,"âœï¸ Edit Komunitas",-1)),t("button",{onClick:n[12]||(n[12]=(...s)=>o.cancelEdit&&o.cancelEdit(...s)),class:"modal-close"},"Ã—")]),t("div",et,[t("div",mt,[n[32]||(n[32]=t("label",null,"Nama *",-1)),e(t("input",{"onUpdate:modelValue":n[13]||(n[13]=s=>o.editingKomunitas.nama=s),class:"form-input",type:"text"},null,512),[[u,o.editingKomunitas.nama]])]),t("div",ut,[n[33]||(n[33]=t("label",null,"Link *",-1)),e(t("input",{"onUpdate:modelValue":n[14]||(n[14]=s=>o.editingKomunitas.link=s),class:"form-input",type:"url"},null,512),[[u,o.editingKomunitas.link]])]),t("div",rt,[n[34]||(n[34]=t("label",null,"URL Foto *",-1)),e(t("input",{"onUpdate:modelValue":n[15]||(n[15]=s=>o.editingKomunitas.foto=s),class:"form-input",type:"url"},null,512),[[u,o.editingKomunitas.foto]]),o.editingKomunitas.foto?(d(),l("div",kt,[t("img",{src:o.editingKomunitas.foto,alt:"Preview",onError:n[16]||(n[16]=(...s)=>o.handleImageError&&o.handleImageError(...s))},null,40,ft)])):r("",!0)]),t("div",vt,[n[36]||(n[36]=t("label",null,"Status",-1)),e(t("select",{"onUpdate:modelValue":n[17]||(n[17]=s=>o.editingKomunitas.status=s),class:"form-select"},[...n[35]||(n[35]=[t("option",{value:"aktif"},"Aktif",-1),t("option",{value:"non-aktif"},"Non-Aktif",-1)])],512),[[P,o.editingKomunitas.status]])])]),t("div",ct,[t("button",{onClick:n[18]||(n[18]=(...s)=>o.cancelEdit&&o.cancelEdit(...s)),class:"btn-secondary"},"Batal"),t("button",{onClick:n[19]||(n[19]=(...s)=>o.saveKomunitas&&o.saveKomunitas(...s)),class:"btn-primary"},"ðŸ’¾ Update")])])])):r("",!0)])}const Kt=N(x,[["render",bt],["__scopeId","data-v-5e0fb160"]]);export{Kt as default};
