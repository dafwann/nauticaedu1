import{_ as L,c as n,a as t,h as g,F as k,f as m,n as b,t as d,w,i as p,y as P,k as h,p as B,s as S,o}from"./app-CNL93yYO.js";import{a as f}from"./index-B9ygI19o.js";const I={name:"AdminBerita",setup(){const u=B([]),i=B(null),v=B([{id:1,label:"Large 1",description:"Berita utama (full width)"},{id:2,label:"Large 2",description:"Berita besar kiri"},{id:3,label:"Large 3",description:"Berita tinggi kanan"},{id:4,label:"Small 1",description:"Berita kecil kiri bawah"},{id:5,label:"Small 2",description:"Berita kecil kanan bawah"}]),l=e=>{const s=v.value.find(r=>r.id===e);return s?s.label:e},_=async()=>{try{const e=await f.get("http://127.0.0.1:8000/api/berita");u.value=e.data.data.map(s=>({id:s.id,position:s.id,title:s.judul,image:s.foto,link:s.link,status:s.status}))}catch(e){console.error("Gagal fetch berita:",e)}},y=e=>window.open(e,"_blank"),a=e=>e.target.style.display="none",c=e=>{i.value={...e}},C=()=>i.value=null,E=async()=>{try{await f.put(`http://127.0.0.1:8000/api/berita/${i.value.id}`,{judul:i.value.title,foto:i.value.image,link:i.value.link});const e=u.value.findIndex(s=>s.id===i.value.id);e!==-1&&(u.value[e]={...i.value}),i.value=null}catch(e){console.error("Gagal simpan berita:",e)}},x=async e=>{try{const s=e.status==="published"?`http://127.0.0.1:8000/api/berita/${e.id}/archive`:`http://127.0.0.1:8000/api/berita/${e.id}/published`,r=await f.put(s);e.status=r.data.data.status,e.title=r.data.data.judul,e.link=r.data.data.link,e.image=r.data.data.foto}catch(s){console.error("Gagal update status:",s)}};return S(()=>_()),{berita:u,editingBerita:i,positions:v,getPositionLabel:l,showImagePreview:y,handleImageError:a,editBerita:c,cancelEdit:C,saveBerita:E,toggleBeritaStatus:x}}},A={class:"admin-berita"},V={class:"position-guide"},G={class:"guide-content"},M={class:"position-grid"},U={class:"table-section"},N={class:"table-container"},j={class:"table-header"},H={class:"table-info"},D={class:"table-wrapper"},F={key:0,class:"berita-table"},J={class:"berita-title-cell"},T={class:"berita-title"},z=["onClick"],K=["src","alt"],R={key:1},q={key:0,class:"link-cell"},O=["href"],Q={key:1},W={class:"action-buttons"},X=["onClick"],Y=["onClick","title"],Z={key:1,class:"empty-state"},$={class:"modal-header"},tt={class:"modal-body"},it={class:"form-group"},at=["value"],lt={class:"form-group"},et={class:"form-group"},st={class:"form-group"},nt={key:0,class:"image-preview-small"},ot=["src"],dt={class:"modal-footer"};function rt(u,i,v,l,_,y){return o(),n("div",A,[i[20]||(i[20]=t("div",{class:"page-header"},[t("div",{class:"header-content"},[t("div",{class:"header-text"},[t("h1",null,"ğŸ“° Management Berita Homepage"),t("p",null,"Kelola berita yang akan ditampilkan di halaman utama"),t("div",{class:"page-notice"}," ğŸ’¡ Berita yang dipublish akan otomatis muncul di homepage ")])])],-1)),t("div",V,[t("div",G,[i[11]||(i[11]=t("h3",null,"ğŸ“‹ Posisi Berita di Homepage:",-1)),t("div",M,[(o(!0),n(k,null,m(l.positions,a=>(o(),n("div",{class:"position-item",key:a.id},[t("div",{class:b(["position-badge",a.id])},d(a.label),3),t("span",null,d(a.description),1)]))),128))])])]),t("div",U,[t("div",N,[t("div",j,[t("div",H," Total "+d(l.berita.length)+" berita di homepage ",1)]),t("div",D,[l.berita.length>0?(o(),n("table",F,[i[13]||(i[13]=t("thead",null,[t("tr",null,[t("th",null,"Posisi"),t("th",null,"Judul Berita"),t("th",null,"Gambar"),t("th",null,"Link"),t("th",null,"Status"),t("th",null,"Aksi")])],-1)),t("tbody",null,[(o(!0),n(k,null,m(l.berita,a=>(o(),n("tr",{key:a.id},[t("td",null,[t("span",{class:b(["position-badge",a.position])},d(l.getPositionLabel(a.position)),3)]),t("td",null,[t("div",J,[t("div",T,d(a.title||"-"),1)])]),t("td",null,[a.image?(o(),n("div",{key:0,class:"image-preview",onClick:c=>l.showImagePreview(a.image)},[t("img",{src:a.image,alt:a.title,class:"thumbnail-preview"},null,8,K),i[12]||(i[12]=t("span",{class:"preview-hint"}," â„¹ï¸Preview",-1))],8,z)):(o(),n("span",R,"-"))]),t("td",null,[a.link?(o(),n("div",q,[t("a",{href:a.link,target:"_blank",class:"external-link",onClick:i[0]||(i[0]=w(()=>{},["stop"]))}," ğŸ”— Buka Link ",8,O)])):(o(),n("span",Q,"-"))]),t("td",null,[t("span",{class:b(["status-badge",a.status])},d(a.status==="published"?"Aktif":"Non-Aktif"),3)]),t("td",null,[t("div",W,[t("button",{onClick:c=>l.editBerita(a),class:"btn-action edit",title:"Edit"}," âœï¸ ",8,X),t("button",{onClick:c=>l.toggleBeritaStatus(a),class:b(["btn-action",a.status==="published"?"unpublish":"publish"]),title:a.status==="published"?"Non-Aktifkan":"Aktifkan"},null,10,Y)])])]))),128))])])):g("",!0),l.berita.length===0?(o(),n("div",Z,[...i[14]||(i[14]=[t("div",{class:"empty-icon"},"ğŸ“°",-1),t("h3",null,"Belum ada berita",-1),t("p",null,"Berita masih kosong.",-1)])])):g("",!0)])])]),l.editingBerita?(o(),n("div",{key:0,class:"modal-backdrop",onClick:i[10]||(i[10]=(...a)=>l.cancelEdit&&l.cancelEdit(...a))},[t("div",{class:"modal",onClick:i[9]||(i[9]=w(()=>{},["stop"]))},[t("div",$,[i[15]||(i[15]=t("h3",null,"âœï¸ Edit Berita Homepage",-1)),t("button",{onClick:i[1]||(i[1]=(...a)=>l.cancelEdit&&l.cancelEdit(...a)),class:"modal-close"},"Ã—")]),t("div",tt,[t("div",it,[i[16]||(i[16]=t("label",null,"Posisi *",-1)),p(t("select",{"onUpdate:modelValue":i[2]||(i[2]=a=>l.editingBerita.position=a),class:"form-select"},[(o(!0),n(k,null,m(l.positions,a=>(o(),n("option",{key:a.id,value:a.id},d(a.label),9,at))),128))],512),[[P,l.editingBerita.position]])]),t("div",lt,[i[17]||(i[17]=t("label",null,"Judul *",-1)),p(t("input",{"onUpdate:modelValue":i[3]||(i[3]=a=>l.editingBerita.title=a),type:"text",class:"form-input"},null,512),[[h,l.editingBerita.title]])]),t("div",et,[i[18]||(i[18]=t("label",null,"Link *",-1)),p(t("input",{"onUpdate:modelValue":i[4]||(i[4]=a=>l.editingBerita.link=a),type:"url",class:"form-input"},null,512),[[h,l.editingBerita.link]])]),t("div",st,[i[19]||(i[19]=t("label",null,"URL Gambar *",-1)),p(t("input",{"onUpdate:modelValue":i[5]||(i[5]=a=>l.editingBerita.image=a),type:"url",class:"form-input"},null,512),[[h,l.editingBerita.image]]),l.editingBerita.image?(o(),n("div",nt,[t("img",{src:l.editingBerita.image,alt:"Preview",onError:i[6]||(i[6]=(...a)=>l.handleImageError&&l.handleImageError(...a))},null,40,ot)])):g("",!0)])]),t("div",dt,[t("button",{onClick:i[7]||(i[7]=(...a)=>l.cancelEdit&&l.cancelEdit(...a)),class:"btn-secondary"},"Batal"),t("button",{onClick:i[8]||(i[8]=(...a)=>l.saveBerita&&l.saveBerita(...a)),class:"btn-primary"},"ğŸ’¾ Simpan")])])])):g("",!0)])}const gt=L(I,[["render",rt],["__scopeId","data-v-8281243e"]]);export{gt as default};
