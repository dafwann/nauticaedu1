import{a as g}from"./index-B9ygI19o.js";import{_ as w,c as t,a as r,w as f,h as n,t as d,i as p,k as h,n as m,l as c,d as v,e as y,b as _,r as k,o as i}from"./app-BWjWeHVC.js";const D={name:"LoginPage",data(){return{loginData:{email:"",password:""},errors:{},errorMessage:"",isLoading:!1,showPassword:!1}},methods:{clearError(o){this.errors[o]="",this.errorMessage=""},validateForm(){this.errors={};let o=!0;return this.loginData.email.trim()||(this.errors.email="Email or username is required",o=!1),this.loginData.password.trim()||(this.errors.password="Password is required",o=!1),o},async handleLogin(){if(this.validateForm()){this.isLoading=!0,this.errorMessage="";try{const o=await g.post("http://127.0.0.1:8000/api/login",{email:this.loginData.email,password:this.loginData.password});localStorage.setItem("token",o.data.token),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userData",JSON.stringify(o.data.user)),o.data.user.role==="admin"?this.$router.push("/admin"):this.$router.push("/profile")}catch(o){o.response?.status===422?this.errors=o.response.data.errors:this.errorMessage=o.response?.data?.message||"Login failed"}finally{this.isLoading=!1}}}}},L={class:"login-page"},M={class:"login-container"},b={class:"login-form-container"},x={key:0,class:"error-message"},P={class:"input-group"},E={key:0,class:"error"},I={class:"input-group"},S={class:"password-wrapper"},V=["type"],C={key:0,d:"M12 4.5C7 4.5 2.7 7.6 1 12c1.7 4.4 6 7.5 11 7.5s9.3-3.1 11-7.5c-1.7-4.4-6-7.5-11-7.5zm0 12A4.5 4.5 0 1 1 12 7.5a4.5 4.5 0 0 1 0 9z"},N={key:1,d:"M3 3l18 18M10.6 10.6a3 3 0 0 0 4.2 4.2M6.7 6.7A9.8 9.8 0 0 1 12 4.5c5 0 9.3 3.1 11 7.5a12 12 0 0 1-5.3 5.8"},B={key:0,class:"error"},U={class:"register-link"},z=["disabled"],A={key:0},F={key:1};function q(o,s,T,J,e,l){const u=k("router-link");return i(),t("div",L,[r("div",M,[s[13]||(s[13]=r("div",{class:"login-header"},[r("h1",{class:"login-title"},"NauticaEdu")],-1)),r("div",b,[r("form",{class:"login-form",onSubmit:s[5]||(s[5]=f((...a)=>l.handleLogin&&l.handleLogin(...a),["prevent"]))},[e.errorMessage?(i(),t("div",x," âš ï¸ "+d(e.errorMessage),1)):n("",!0),r("div",P,[s[6]||(s[6]=r("label",{for:"email",class:"form-label"},"Email or Username",-1)),p(r("input",{type:"text",id:"email","onUpdate:modelValue":s[0]||(s[0]=a=>e.loginData.email=a),class:m(["form-input",{"error-input":e.errors.email}]),placeholder:"Enter your email or username",onInput:s[1]||(s[1]=a=>l.clearError("email"))},null,34),[[h,e.loginData.email]]),e.errors.email?(i(),t("p",E,d(e.errors.email),1)):n("",!0)]),r("div",I,[s[7]||(s[7]=r("label",{for:"password",class:"form-label"},"Password",-1)),r("div",S,[p(r("input",{type:e.showPassword?"text":"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=a=>e.loginData.password=a),class:m(["form-input",{"error-input":e.errors.password}]),placeholder:"Enter your password",onInput:s[3]||(s[3]=a=>l.clearError("password"))},null,42,V),[[c,e.loginData.password]]),(i(),t("svg",{onClick:s[4]||(s[4]=a=>e.showPassword=!e.showPassword),class:"eye-icon",viewBox:"0 0 24 24"},[e.showPassword?(i(),t("path",N)):(i(),t("path",C))]))]),e.errors.password?(i(),t("p",B,d(e.errors.password),1)):n("",!0)]),r("div",U,[s[9]||(s[9]=r("span",null,"Don't have an Account? ",-1)),v(u,{to:"/register",class:"register-text"},{default:y(()=>[...s[8]||(s[8]=[_("Sign Up",-1)])]),_:1}),s[10]||(s[10]=r("br",null,null,-1)),s[11]||(s[11]=r("span",null,"Forget Password? ",-1)),s[12]||(s[12]=r("a",{href:"mailto:nauticaedu123@gmail.com",class:"register-text"},"Reset Password",-1))]),r("button",{type:"submit",class:"login-button",disabled:e.isLoading},[e.isLoading?(i(),t("span",A,"ðŸ”„ Loading...")):(i(),t("span",F,"Login"))],8,z)],32)])])])}const j=w(D,[["render",q],["__scopeId","data-v-51ae7429"]]);export{j as default};
